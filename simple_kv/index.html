<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `simple_kv` crate."><meta name="keywords" content="rust, rustlang, rust-lang, simple_kv"><title>simple_kv - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-04897efae0a76fcd.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-bc1b32400f872ddb.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../simple_kv/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../simple_kv/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate simple_kv</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">simple_kv</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/simple_kv/lib.rs.html#1-78">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="command_request/index.html" title="simple_kv::command_request mod">command_request</a></div><div class="item-right docblock-short">Nested message and enum types in <code>CommandRequest</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="value/index.html" title="simple_kv::value mod">value</a></div><div class="item-right docblock-short">Nested message and enum types in <code>Value</code>.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Broadcaster.html" title="simple_kv::Broadcaster struct">Broadcaster</a></div><div class="item-right docblock-short">用于主题发布和订阅的数据结构</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClientConfig.html" title="simple_kv::ClientConfig struct">ClientConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClientTlsConfig.html" title="simple_kv::ClientTlsConfig struct">ClientTlsConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CommandRequest.html" title="simple_kv::CommandRequest struct">CommandRequest</a></div><div class="item-right docblock-short">来自客户端的命令请求</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CommandResponse.html" title="simple_kv::CommandResponse struct">CommandResponse</a></div><div class="item-right docblock-short">服务端的命令响应</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GeneralConfig.html" title="simple_kv::GeneralConfig struct">GeneralConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Gzip.html" title="simple_kv::Gzip struct">Gzip</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hdel.html" title="simple_kv::Hdel struct">Hdel</a></div><div class="item-right docblock-short">del 相关命令</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hexist.html" title="simple_kv::Hexist struct">Hexist</a></div><div class="item-right docblock-short">存在性判断</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hget.html" title="simple_kv::Hget struct">Hget</a></div><div class="item-right docblock-short">get 相关命令</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hgetall.html" title="simple_kv::Hgetall struct">Hgetall</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hmdel.html" title="simple_kv::Hmdel struct">Hmdel</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hmexist.html" title="simple_kv::Hmexist struct">Hmexist</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hmget.html" title="simple_kv::Hmget struct">Hmget</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hmset.html" title="simple_kv::Hmset struct">Hmset</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hset.html" title="simple_kv::Hset struct">Hset</a></div><div class="item-right docblock-short">set 相关命令</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Kvpair.html" title="simple_kv::Kvpair struct">Kvpair</a></div><div class="item-right docblock-short">返回键值对</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LogConfig.html" title="simple_kv::LogConfig struct">LogConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Lz4.html" title="simple_kv::Lz4 struct">Lz4</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MemTable.html" title="simple_kv::MemTable struct">MemTable</a></div><div class="item-right docblock-short">基于 DashMap 构造 MemTable，实现 Storage Trait</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PSubscribe.html" title="simple_kv::PSubscribe struct">PSubscribe</a></div><div class="item-right docblock-short">订阅某个模式</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PUnsubscribe.html" title="simple_kv::PUnsubscribe struct">PUnsubscribe</a></div><div class="item-right docblock-short">退订某个模式</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ProstClientStream.html" title="simple_kv::ProstClientStream struct">ProstClientStream</a></div><div class="item-right docblock-short">处理 Client socket 的读写</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ProstServerStream.html" title="simple_kv::ProstServerStream struct">ProstServerStream</a></div><div class="item-right docblock-short">处理服务端某个 accept 下的 socket 读写</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ProstStream.html" title="simple_kv::ProstStream struct">ProstStream</a></div><div class="item-right docblock-short">处理 KV server prost frame 的 stream</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Publish.html" title="simple_kv::Publish struct">Publish</a></div><div class="item-right docblock-short">发布数据到某个主题</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServerConfig.html" title="simple_kv::ServerConfig struct">ServerConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServerTlsConfig.html" title="simple_kv::ServerTlsConfig struct">ServerTlsConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Service.html" title="simple_kv::Service struct">Service</a></div><div class="item-right docblock-short">Service 数据结构，其作用是将 CommandService 和 Storage 这两个 Trait 联合起来
避免向用户暴露底层细节</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServiceInner.html" title="simple_kv::ServiceInner struct">ServiceInner</a></div><div class="item-right docblock-short">ServiceInner：Service 内部数据结构，这也是 Rust 的一个惯例，把需要在多线程下 clone 的主体和其内部结构分开，这样代码逻辑更加清晰</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SledDb.html" title="simple_kv::SledDb struct">SledDb</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StorageIter.html" title="simple_kv::StorageIter struct">StorageIter</a></div><div class="item-right docblock-short">提供 Storage Iterator 来对 iter 进行抽象，这样 trait 的实现者
只需要将它们的 iterator 提供了 StorageIter，然后它们保证 next()
传出的类型实现了 Into<Kvpair> 即可</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StreamResult.html" title="simple_kv::StreamResult struct">StreamResult</a></div><div class="item-right docblock-short">创建时获取 subscription id，并使用 Deref/DerefMut 使其使用上和 Stream 一致</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Subscribe.html" title="simple_kv::Subscribe struct">Subscribe</a></div><div class="item-right docblock-short">订阅某个主题</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TlsClientConnector.html" title="simple_kv::TlsClientConnector struct">TlsClientConnector</a></div><div class="item-right docblock-short">存放 TLS Client 并提供方法 connect 来将底层协议转换为 TLS</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TlsServerAcceptor.html" title="simple_kv::TlsServerAcceptor struct">TlsServerAcceptor</a></div><div class="item-right docblock-short">存放 TLS ServerConfig 并提供方法 accept 将底层的协议转换成为 TLS</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Unsubscribe.html" title="simple_kv::Unsubscribe struct">Unsubscribe</a></div><div class="item-right docblock-short">退订某个主题</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Value.html" title="simple_kv::Value struct">Value</a></div><div class="item-right docblock-short">返回键值</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.YamuxCtrl.html" title="simple_kv::YamuxCtrl struct">YamuxCtrl</a></div><div class="item-right docblock-short">控制结构</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Zstd.html" title="simple_kv::Zstd struct">Zstd</a></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.KvError.html" title="simple_kv::KvError enum">KvError</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.LevelConfig.html" title="simple_kv::LevelConfig enum">LevelConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.RotationConfig.html" title="simple_kv::RotationConfig enum">RotationConfig</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.StorageConfig.html" title="simple_kv::StorageConfig enum">StorageConfig</a></div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.GZIP.html" title="simple_kv::GZIP constant">GZIP</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.LZ4.html" title="simple_kv::LZ4 constant">LZ4</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ZSTD.html" title="simple_kv::ZSTD constant">ZSTD</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.CommandService.html" title="simple_kv::CommandService trait">CommandService</a></div><div class="item-right docblock-short">对 Command 的处理进行抽象</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Compressor.html" title="simple_kv::Compressor trait">Compressor</a></div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FrameCoder.html" title="simple_kv::FrameCoder trait">FrameCoder</a></div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Notify.html" title="simple_kv::Notify trait">Notify</a></div><div class="item-right docblock-short">不可变事件通知</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.NotifyMut.html" title="simple_kv::NotifyMut trait">NotifyMut</a></div><div class="item-right docblock-short">可变事件通知</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Storage.html" title="simple_kv::Storage trait">Storage</a></div><div class="item-right docblock-short">对存储的抽象，定义了外界如何与后端打交道</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Topic.html" title="simple_kv::Topic trait">Topic</a></div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.TopicService.html" title="simple_kv::TopicService trait">TopicService</a></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.compress.html" title="simple_kv::compress fn">compress</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.decompress.html" title="simple_kv::decompress fn">decompress</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dispatch.html" title="simple_kv::dispatch fn">dispatch</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dispatch_stream.html" title="simple_kv::dispatch_stream fn">dispatch_stream</a></div><div class="item-right docblock-short">从 Request 中得到 Response，目前处理所有 PUBLISH/SUBSCRIBE/UNSUBSCRIBE</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_frame.html" title="simple_kv::read_frame fn">read_frame</a></div><div class="item-right docblock-short">从 stream 中读出一个完整的 frame</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.start_client_with_config.html" title="simple_kv::start_client_with_config fn">start_client_with_config</a></div><div class="item-right docblock-short">通过配置创建 kv 客户端</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.start_server_with_config.html" title="simple_kv::start_server_with_config fn">start_server_with_config</a></div><div class="item-right docblock-short">通过配置创建 kv 服务器</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.AfterSendFunc.html" title="simple_kv::AfterSendFunc type">AfterSendFunc</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.BeforeSendFunc.html" title="simple_kv::BeforeSendFunc type">BeforeSendFunc</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ReceivedFunc.html" title="simple_kv::ReceivedFunc type">ReceivedFunc</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ResponseFunc.html" title="simple_kv::ResponseFunc type">ResponseFunc</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.StreamingResponse.html" title="simple_kv::StreamingResponse type">StreamingResponse</a></div><div class="item-right docblock-short">使用 tokio-stream 的 stream wrapper 来把一个 mpsc::Receiver 转换
成 Receiver Stream，这样就可以不断调用 next 来获得下一个值</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="simple_kv" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (3020239de 2023-01-09)" data-search-js="search-181581080540673f.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-58836c674e2f7bd2.css" ></div></body></html>